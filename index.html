<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESG ë³´ì•ˆ ì„±ìˆ™ë„ ì§„ë‹¨ ì‹œìŠ¤í…œ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ±</text></svg>">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Malgun Gothic', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2d5016;
            background: linear-gradient(135deg, #a8e6cf 0%, #88c999 50%, #4caf50 100%);
            min-height: 100vh;
            position: relative;
        }

        /* í™˜ê²½ ì¹œí™”ì  ë°°ê²½ íŒ¨í„´ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(76, 175, 80, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 195, 74, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(102, 187, 106, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, #ffffff 0%, #f1f8e9 100%);
            padding: 30px 20px;
            text-align: center;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 
                0 20px 40px rgba(76, 175, 80, 0.15),
                0 8px 16px rgba(76, 175, 80, 0.1);
            border: 2px solid rgba(76, 175, 80, 0.1);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: 'ğŸŒ±';
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 2em;
            opacity: 0.3;
        }

        /* ì™¸êµë¶€ ë¡œê³  ìŠ¤íƒ€ì¼ */
        .mofa-logo {
            text-align: center;
            margin-bottom: 20px;
        }

        .mofa-symbol {
            width: 60px;
            height: 60px;
            position: relative;
        }

        .mofa-symbol svg {
            width: 100%;
            height: 100%;
        }

        .mofa-text {
            text-align: left;
        }

        .mofa-text-ko {
            font-size: 1.4em;
            font-weight: bold;
            color: #1a3a52;
            margin: 0;
            line-height: 1.2;
        }

        .mofa-text-en {
            font-size: 0.9em;
            color: #666;
            margin: 0;
            line-height: 1.2;
        }

        .header h1 {
            color: #2e7d32;
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 700;
            background: linear-gradient(135deg, #2e7d32, #4caf50);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #558b2f;
            font-size: 1.1em;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 0.9em;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        /* ì‹œê°í™” ì„¹ì…˜ */
        .visualization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .viz-card {
            background: linear-gradient(135deg, #ffffff 0%, #f9fbe7 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.1);
            border: 2px solid rgba(139, 195, 74, 0.1);
        }

        .viz-card h3 {
            color: #2e7d32;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
        }

        .chart-small {
            height: 250px;
        }

        /* í†µê³„ ì¹´ë“œ ê°„ì†Œí™” */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card-mini {
            background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
            padding: 20px 15px;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid #4caf50;
            transition: transform 0.3s ease;
        }

        .stat-card-mini:hover {
            transform: translateY(-3px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #558b2f;
            font-size: 0.9em;
            font-weight: 600;
        }

        /* ì œë¡œíŠ¸ëŸ¬ìŠ¤íŠ¸ ì¸í¬ê·¸ë˜í”½ */
        .infographic-section {
            background: linear-gradient(135deg, #ffffff 0%, #f1f8e9 100%);
            padding: 30px 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 15px 30px rgba(76, 175, 80, 0.1);
        }

        .infographic-title {
            text-align: center;
            color: #2e7d32;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .zt-principles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .zt-item {
            text-align: center;
            padding: 15px 10px;
            background: linear-gradient(135deg, #f1f8e9, #ffffff);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .zt-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.15);
        }

        .zt-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: block;
        }

        .zt-label {
            color: #2e7d32;
            font-weight: 600;
            font-size: 0.95em;
        }

        /* í¼ ìŠ¤íƒ€ì¼ ê°œì„  */
        .form-container {
            background: linear-gradient(135deg, #ffffff 0%, #f9fbe7 100%);
            padding: 30px 20px;
            border-radius: 20px;
            box-shadow: 
                0 25px 50px rgba(76, 175, 80, 0.15),
                0 10px 20px rgba(76, 175, 80, 0.1);
            margin-bottom: 30px;
            border: 2px solid rgba(139, 195, 74, 0.1);
        }

        .section-header {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .section-header h2 {
            font-size: 1.6em;
            margin-bottom: 8px;
        }

        .section-description {
            background: #f1f8e9;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #4caf50;
            font-size: 0.95em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2e7d32;
            font-size: 1em;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #c8e6c9;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #4caf50;
            box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.1);
            background: #ffffff;
        }

        /* ì§ˆë¬¸ ì¹´ë“œ ëª¨ë°”ì¼ ìµœì í™” */
        .question-card {
            background: linear-gradient(135deg, #f1f8e9 0%, #ffffff 100%);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            border-left: 6px solid #4caf50;
            transition: all 0.3s ease;
        }

        .question-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.15);
        }

        .question-text {
            font-size: 1.05em;
            font-weight: 600;
            color: #2e7d32;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* í‰ê°€ ì˜µì…˜ ëª¨ë°”ì¼ ìµœì í™” */
        .rating-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .rating-option {
            position: relative;
        }

        .rating-option input[type="radio"] {
            display: none;
        }

        .rating-option label {
            display: block;
            padding: 12px 8px;
            background: linear-gradient(135deg, #ffffff, #f8f8f8);
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            font-weight: 500;
        }

        .rating-option input[type="radio"]:checked + label {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            border-color: #2e7d32;
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.3);
        }

        .rating-option label:hover {
            border-color: #4caf50;
            background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
        }

        .progress-container {
            background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
            height: 10px;
            border-radius: 8px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(76, 175, 80, 0.1);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #66bb6a, #8bc34a);
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 8px;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
            color: #2e7d32;
            font-size: 1em;
        }

        .btn {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            min-width: 150px;
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.4);
            background: linear-gradient(135deg, #2e7d32, #4caf50);
        }

        .btn:disabled {
            background: linear-gradient(135deg, #a5d6a7, #c8e6c9);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #868e96);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #5a6268, #6c757d);
        }

        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* ê²°ê³¼ í˜ì´ì§€ */
        .results-container {
            display: none;
            background: linear-gradient(135deg, #ffffff 0%, #f1f8e9 100%);
            padding: 30px 20px;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(76, 175, 80, 0.15);
            margin-top: 30px;
            border: 2px solid rgba(139, 195, 74, 0.1);
        }

        .score-display {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #4caf50 0%, #66bb6a 50%, #8bc34a 100%);
            color: white;
            border-radius: 16px;
            margin-bottom: 25px;
        }

        .score-number {
            font-size: 3.5em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .score-label {
            font-size: 1.3em;
            opacity: 0.95;
            font-weight: 500;
        }

        .area-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .area-score-card {
            background: linear-gradient(135deg, #f1f8e9 0%, #ffffff 100%);
            padding: 20px 15px;
            border-radius: 12px;
            text-align: center;
            border-left: 5px solid #4caf50;
            transition: all 0.3s ease;
        }

        .area-score-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.15);
        }

        .area-score-card h3 {
            color: #2e7d32;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-weight: 600;
        }

        .area-score-value {
            font-size: 2em;
            font-weight: bold;
            color: #4caf50;
        }

        .hidden {
            display: none;
        }

        .loading {
            text-align: center;
            padding: 30px;
        }

        .spinner {
            border: 4px solid #e8f5e8;
            border-top: 4px solid #4caf50;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: linear-gradient(135deg, #f44336, #e57373);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }

        .success-message {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }

        .eco-icon {
            display: inline-block;
            margin-right: 5px;
            font-size: 1.1em;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .header p {
                font-size: 1em;
            }
            
            .badge {
                font-size: 0.85em;
                padding: 8px 15px;
            }
            
            .mofa-symbol {
                width: 50px;
                height: 50px;
            }
            
            .mofa-text-ko {
                font-size: 1.2em;
            }
            
            .mofa-text-en {
                font-size: 0.8em;
            }
            
            .visualization-grid {
                grid-template-columns: 1fr;
            }
            
            .zt-principles {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .zt-icon {
                font-size: 2em;
            }
            
            .zt-label {
                font-size: 0.85em;
            }
            
            .rating-container {
                grid-template-columns: 1fr 1fr;
            }
            
            .rating-option label {
                padding: 10px 5px;
                font-size: 0.85em;
            }
            
            .navigation-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 200px;
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .question-text {
                font-size: 1em;
            }
            
            .section-description {
                font-size: 0.9em;
                padding: 12px;
            }
        }

        @media (max-width: 480px) {
            .stats-row {
                grid-template-columns: 1fr 1fr;
            }
            
            .stat-number {
                font-size: 1.6em;
            }
            
            .stat-label {
                font-size: 0.8em;
            }
            
            .zt-principles {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .area-scores {
                grid-template-columns: 1fr 1fr;
            }
            
            .area-score-card {
                padding: 15px 10px;
            }
            
            .area-score-card h3 {
                font-size: 0.95em;
            }
            
            .area-score-value {
                font-size: 1.6em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ë©”ì¸ í˜ì´ì§€ -->
        <div class="page active" id="mainPage">
            <div class="header">
                <!-- ì™¸êµë¶€ ë¡œê³  ì¶”ê°€ -->
                <div class="mofa-logo">
                     <p class="mofa-text-ko">ì™¸êµë¶€</p>
                     <p class="mofa-text-en">Ministry of Foreign Affairs</p>
                </div>
                <h1><span class="eco-icon">ğŸŒ±</span>ESG ë³´ì•ˆ ì„±ìˆ™ë„ ì§„ë‹¨</h1>
                <p><span class="eco-icon">ğŸ”</span>ì œë¡œíŠ¸ëŸ¬ìŠ¤íŠ¸ ê¸°ë°˜ ê¸°ì—… ë³´ì•ˆ í‰ê°€</p>
                <div class="badge">
                    <span class="eco-icon">ğŸŒ</span>ESG í˜‘ë ¥ ë„¤íŠ¸ì›Œí¬ í”Œë«í¼
                </div>
            </div>

            <!-- í•µì‹¬ í†µê³„ ì¹´ë“œ -->
            <div class="stats-row">
                <div class="stat-card-mini">
                    <div class="stat-number">43.9%</div>
                    <div class="stat-label">ESG ë¯¸ë„ì…</div>
                </div>
                <div class="stat-card-mini">
                    <div class="stat-number">36.1%</div>
                    <div class="stat-label">ì˜ˆì‚° ë¶€ì¡±</div>
                </div>
                <div class="stat-card-mini">
                    <div class="stat-number">8.3%</div>
                    <div class="stat-label">ì „ë‹´ ì¸ë ¥</div>
                </div>
                <div class="stat-card-mini">
                    <div class="stat-number">488ë§Œ$</div>
                    <div class="stat-label">ìœ ì¶œ ë¹„ìš©</div>
                </div>
            </div>

            <!-- ì‹œê°í™” ì°¨íŠ¸ ê·¸ë¦¬ë“œ -->
            <div class="visualization-grid">
                <div class="viz-card">
                    <h3>ğŸ¢ ESG ê²½ì˜ ë„ì… í˜„í™©</h3>
                    <div id="esgPieChart" class="chart-small"></div>
                </div>
                <div class="viz-card">
                    <h3>ğŸ“Š ì—…ì¢…ë³„ ESG ë„ì…ë¥ </h3>
                    <div id="industryBarChart" class="chart-small"></div>
                </div>
                <div class="viz-card">
                    <h3>ğŸ“ˆ ì—°ë„ë³„ ESG ì„±ì¥ ì¶”ì´</h3>
                    <div id="trendLineChart" class="chart-small"></div>
                </div>
            </div>

            <!-- ì œë¡œíŠ¸ëŸ¬ìŠ¤íŠ¸ ì¸í¬ê·¸ë˜í”½ -->
            <div class="infographic-section">
                <h2 class="infographic-title">ğŸ›¡ï¸ ì œë¡œíŠ¸ëŸ¬ìŠ¤íŠ¸ 6ëŒ€ í•µì‹¬ ì˜ì—­</h2>
                <div class="zt-principles">
                    <div class="zt-item">
                        <span class="zt-icon">ğŸ‘¤</span>
                        <div class="zt-label">ì‹ ì›</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">ğŸ“±</span>
                        <div class="zt-label">ê¸°ê¸°</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">ğŸŒ</span>
                        <div class="zt-label">ë„¤íŠ¸ì›Œí¬</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">ğŸ’»</span>
                        <div class="zt-label">ì‹œìŠ¤í…œ</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">ğŸ“‹</span>
                        <div class="zt-label">ì• í”Œë¦¬ì¼€ì´ì…˜</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">ğŸ”’</span>
                        <div class="zt-label">ë°ì´í„°</div>
                    </div>
                </div>
            </div>

            <div class="navigation-buttons">
                <button class="btn" onclick="showPage('companyInfoPage')">
                    <span class="eco-icon">ğŸš€</span>ì§„ë‹¨ ì‹œì‘
                </button>
            </div>
        </div>

        <!-- ê¸°ì—… ì •ë³´ ì…ë ¥ í˜ì´ì§€ -->
        <div class="page" id="companyInfoPage">
            <div class="header">
                <!-- ì™¸êµë¶€ ë¡œê³  ì¶”ê°€ -->
                <div class="mofa-logo">
                     <p class="mofa-text-ko">ì™¸êµë¶€</p>
                     <p class="mofa-text-en">Ministry of Foreign Affairs</p>
                </div>
                <h1><span class="eco-icon">ğŸ¢</span>ê¸°ì—… ì •ë³´ ì…ë ¥</h1>
                <p>ì •í™•í•œ ì§„ë‹¨ì„ ìœ„í•œ ê¸°ë³¸ ì •ë³´</p>
            </div>

            <div class="form-container">
                <form id="companyForm">
                    <div class="form-group">
                        <label for="companyName"><span class="eco-icon">ğŸ·ï¸</span>ê¸°ì—…ëª… *</label>
                        <input type="text" id="companyName" name="companyName" required placeholder="ê¸°ì—…ëª… ì…ë ¥">
                    </div>
                    
                    <div class="form-group">
                        <label for="email"><span class="eco-icon">ğŸ“§</span>ì´ë©”ì¼ *</label>
                        <input type="email" id="email" name="email" required placeholder="email@company.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="companySize"><span class="eco-icon">ğŸ‘¥</span>ê¸°ì—… ê·œëª¨ *</label>
                        <select id="companySize" name="companySize" required>
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="1">ì†Œê¸°ì—… (50ëª… ë¯¸ë§Œ)</option>
                            <option value="2">ì¤‘ì†Œê¸°ì—… (50-299ëª…)</option>
                            <option value="3">ì¤‘ê²¬ê¸°ì—… (300-999ëª…)</option>
                            <option value="4">ëŒ€ê¸°ì—… (1000ëª… ì´ìƒ)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="businessType"><span class="eco-icon">ğŸ­</span>ì—…ì¢… *</label>
                        <select id="businessType" name="businessType" required>
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="1">ê³ ìœ„í—˜êµ° (ê¸ˆìœµ/ì˜ë£Œ/ì—ë„ˆì§€)</option>
                            <option value="2">ì¤‘ìœ„í—˜êµ° (IT/ì „ìí†µì‹ )</option>
                            <option value="3">ì œì¡°ì—…êµ° (ìë™ì°¨/ê¸°ê³„)</option>
                            <option value="4">ì„œë¹„ìŠ¤êµ° (ìœ í†µ/ë¬¼ë¥˜)</option>
                            <option value="5">ì „í†µì—…êµ° (ê±´ì„¤/ë†ì—…)</option>
                        </select>
                    </div>
                </form>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="showPage('mainPage')">
                        <span class="eco-icon">â¬…ï¸</span>ì´ì „
                    </button>
                    <button class="btn" onclick="startAssessment()">
                        <span class="eco-icon">â–¶ï¸</span>ì§„ë‹¨ ì‹œì‘
                    </button>
                </div>
            </div>

            <div class="error-message" id="companyErrorMessage"></div>
        </div>

        <!-- ì§ˆë¬¸ í˜ì´ì§€ë“¤ -->
        <div class="page" id="questionPage">
            <div class="section-header">
                <h2 id="sectionTitle">ì˜ì—­ ì§„ë‹¨</h2>
                <p id="sectionSubtitle">í˜„ì¬ ì˜ì—­</p>
            </div>

            <div class="section-description" id="sectionDescription">
                <!-- ì˜ì—­ë³„ ì„¤ëª…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>

            <div class="form-container">
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="progress-text" id="progressText">ì§„í–‰ë¥ : 0%</div>

                <div id="questionsContainer">
                    <!-- ì§ˆë¬¸ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="previousSection()" id="prevBtn">
                        <span class="eco-icon">â¬…ï¸</span>ì´ì „
                    </button>
                    <button class="btn" onclick="nextSection()" id="nextBtn">
                        <span class="eco-icon">â–¶ï¸</span>ë‹¤ìŒ
                    </button>
                </div>
            </div>

            <div class="error-message" id="questionErrorMessage"></div>
        </div>

        <!-- ê²°ê³¼ í˜ì´ì§€ -->
        <div class="page" id="resultsPage">
            <div class="header">
                <!-- ì™¸êµë¶€ ë¡œê³  ì¶”ê°€ -->
                <div class="mofa-logo">
                     <p class="mofa-text-ko">ì™¸êµë¶€</p>
                     <p class="mofa-text-en">Ministry of Foreign Affairs</p>
                </div>
                <h1><span class="eco-icon">ğŸ“Š</span>ì§„ë‹¨ ê²°ê³¼</h1>
                <p>ESG ë³´ì•ˆ ì„±ìˆ™ë„ ì§„ë‹¨ ê²°ê³¼</p>
            </div>

            <div class="results-container" style="display: block;">
                <div class="score-display" id="scoreDisplay">
                    <div class="score-number" id="overallScore">0.0</div>
                    <div class="score-label" id="maturityLevel">Level 1 - ê¸°ì¡´</div>
                </div>
                
                <div class="chart-container">
                    <div id="radarChart"></div>
                </div>
                
                <div class="area-scores" id="areaScores"></div>

                <div class="navigation-buttons">
                    <button class="btn" onclick="showPage('mainPage')">
                        <span class="eco-icon">ğŸ </span>ì²˜ìŒìœ¼ë¡œ
                    </button>
                    <button class="btn" onclick="restartAssessment()">
                        <span class="eco-icon">ğŸ”„</span>ë‹¤ì‹œ ì§„ë‹¨
                    </button>
                </div>
            </div>

            <div class="loading" id="loadingMessage" style="display: none;">
                <div class="spinner"></div>
                <p><span class="eco-icon">âš¡</span>ê²°ê³¼ ë¶„ì„ ì¤‘...</p>
            </div>
        </div>

        <div class="success-message" id="successMessage"></div>
        <div class="error-message" id="errorMessage"></div>
    </div>

    <script>
        // âœ… í…ŒìŠ¤íŠ¸ìš© ë¡œì»¬ URL (ê°œë°œ ì¤‘ì—ëŠ” ì´ê²ƒì„ ì‚¬ìš©)
        // const API_URL = 'http://localhost:8888/.netlify/functions/submit-esg';
        
        // âœ… í”„ë¡œë•ì…˜ URL (ë°°í¬ í›„ì—ëŠ” ì´ê²ƒì„ ì‚¬ìš©)
        const API_URL = '/.netlify/functions/submit-esg';
        
        // í˜„ì¬ ìƒíƒœ ê´€ë¦¬
        let currentSection = 0;
        let answers = {};
        let companyInfo = {};

        // ì˜ì—­ë³„ ì •ë³´ ë° ì§ˆë¬¸ ë°ì´í„°
        const assessmentAreas = {
            "ì‹ ì›": {
                title: "ì‹ ì› (Identity)",
                description: "ì‚¬ìš©ìì™€ ê¸°ê¸°ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ê³  ì¸ì¦í•˜ëŠ” ì²´ê³„ì…ë‹ˆë‹¤. ì ì ˆí•œ ì¸ì¦ ë°©ë²•ìœ¼ë¡œ ì‹ ì›ì„ ê²€ì¦í•˜ê³  ë¦¬ìŠ¤í¬ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.",
                questions: [
                    "ì˜¨í”„ë ˆë¯¸ìŠ¤ì™€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì˜ ID ê´€ë¦¬ë¥¼ í†µí•©í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆê¹Œ?",
                    "ë‹¤ë‹¨ê³„ ì¸ì¦(MFA)ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆê¹Œ?", 
                    "í´ë¼ìš°ë“œ ê¸°ë°˜ ì¸ì¦ ë° ìƒì²´ì¸ì¦ì„ ì§€ì›í•©ë‹ˆê¹Œ?",
                    "AI ê¸°ë°˜ìœ¼ë¡œ ìœ„í—˜ë„ë¥¼ ìë™ íŒë‹¨í•˜ì—¬ ë³´ì•ˆì •ì±…ì„ ì ìš©í•©ë‹ˆê¹Œ?"
                ]
            },
            "ê¸°ê¸° ë° ì—”ë“œí¬ì¸íŠ¸": {
                title: "ê¸°ê¸° ë° ì—”ë“œí¬ì¸íŠ¸",
                description: "ê¸°ì—…ë§ì— ì—°ê²°ëœ ëª¨ë“  í•˜ë“œì›¨ì–´ ê¸°ê¸°ì˜ ë³´ì•ˆì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì‹ ë¢°ë„ê°€ ë‚®ì€ ê¸°ê¸°ì˜ ì ‘ê·¼ì„ ì°¨ë‹¨í•˜ê³  ë³´ì•ˆ ì •ì±…ì„ ìë™ ì ìš©í•©ë‹ˆë‹¤.",
                questions: [
                    "ëª¨ë“  ê¸°ê¸°ì˜ ë³´ì•ˆì •ì±… ì¤€ìˆ˜ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆê¹Œ?",
                    "ëŒ€ë¶€ë¶„ì˜ ê¸°ê¸°ì— ë³´ì•ˆì •ì±…ì„ ìë™ìœ¼ë¡œ ì ìš©í•˜ê³  ìˆìŠµë‹ˆê¹Œ?",
                    "ëª¨ë“  ê¸°ê¸°ì— ëŒ€í•´ ìœ„í˜‘ íƒì§€ ë° ìë™ ëŒ€ì‘ì´ ê°€ëŠ¥í•©ë‹ˆê¹Œ?",
                    "ê¸°ê¸° ë³´ì•ˆìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ìë™ ê´€ë¦¬í•©ë‹ˆê¹Œ?"
                ]
            },
            "ë„¤íŠ¸ì›Œí¬": {
                title: "ë„¤íŠ¸ì›Œí¬",
                description: "ë°ì´í„° ì „ì†¡ì— ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ë„¤íŠ¸ì›Œí¬ë¥¼ ì„¸ë¶„í™”í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤. ë§ˆì´í¬ë¡œ ì„¸ê·¸ë©˜í…Œì´ì…˜ìœ¼ë¡œ ë¬´ë‹¨ ì ‘ê·¼ì„ ë°©ì§€í•©ë‹ˆë‹¤.",
                questions: [
                    "ê²½ê³„ë³´ì•ˆ ì¤‘ì‹¬ì˜ ë„¤íŠ¸ì›Œí¬ì—ì„œ ëª¨ë“  íŠ¸ë˜í”½ì„ ëª¨ë‹ˆí„°ë§í•©ë‹ˆê¹Œ?",
                    "ë‚´ë¶€ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ ê°„ì˜ íŠ¸ë˜í”½ì„ ì„œë¡œ ê²©ë¦¬í•˜ê³  ìˆìŠµë‹ˆê¹Œ?",
                    "ë§ˆì´í¬ë¡œ ì„¸ê·¸ë©˜í…Œì´ì…˜ìœ¼ë¡œ ê° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë³´í˜¸í•©ë‹ˆê¹Œ?",
                    "ìë™í™”ëœ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ì •ì±… ë°°í¬ ë° ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆê¹Œ?"
                ]
            },
            "ì‹œìŠ¤í…œ": {
                title: "ì‹œìŠ¤í…œ",
                description: "ì¤‘ìš” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” ì„œë²„ ì‹œìŠ¤í…œì˜ ë³´ì•ˆì…ë‹ˆë‹¤. ì„¸ë°€í•œ ì ‘ê·¼ ì œì–´ì™€ ìë™í™”ëœ ë³´ì•ˆ ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
                questions: [
                    "ì‹œìŠ¤í…œ ì ‘ê·¼ ì‹œ ë‹¨ìˆœí•œ ID/íŒ¨ìŠ¤ì›Œë“œë§Œ ì‚¬ìš©í•©ë‹ˆê¹Œ?",
                    "ê° ì‹œìŠ¤í…œì„ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆê¹Œ?",
                    "ì˜¨í”„ë ˆë¯¸ìŠ¤ì™€ í´ë¼ìš°ë“œ ì‹œìŠ¤í…œì— ë³´ì•ˆ íŒ¨ì¹˜ë¥¼ ìë™ ì ìš©í•©ë‹ˆê¹Œ?",
                    "ëª¨ë“  ì‹œìŠ¤í…œì„ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§í•˜ê³  ìë™ ëŒ€ì‘ì´ ê°€ëŠ¥í•©ë‹ˆê¹Œ?"
                ]
            },
            "ì• í”Œë¦¬ì¼€ì´ì…˜": {
                title: "ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì›Œí¬ë¡œë“œ",
                description: "ê¸°ì—…ì˜ ì„œë¹„ìŠ¤ì™€ í”„ë¡œê·¸ë¨ì˜ ë³´ì•ˆì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ìµœì†Œê¶Œí•œ ì›ì¹™ê³¼ ì‹¤ì‹œê°„ ìœ„í—˜ ë¶„ì„ì„ í†µí•´ ì•ˆì „í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.",
                questions: [
                    "ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ê·¼ ê¶Œí•œì„ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ê³  ìˆìŠµë‹ˆê¹Œ?",
                    "ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ì‹œ ê¸°ë³¸ì ì¸ ë³´ì•ˆ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•©ë‹ˆê¹Œ?",
                    "ìµœì†Œê¶Œí•œ ì›ì¹™ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ê·¼ì„ ìë™ ì œì–´í•©ë‹ˆê¹Œ?",
                    "ì‹¤ì‹œê°„ ìœ„í—˜ ë¶„ì„ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ê·¼ì„ ìë™ ì œì–´í•©ë‹ˆê¹Œ?"
                ]
            },
            "ë°ì´í„°": {
                title: "ë°ì´í„°",
                description: "ê°€ì¥ ì¤‘ìš”í•œ ìì‚°ì¸ ë°ì´í„°ë¥¼ ë³´í˜¸í•©ë‹ˆë‹¤. ë°ì´í„° ë¶„ë¥˜, ì•”í˜¸í™”, ì ‘ê·¼ ì œì–´ë¥¼ í†µí•´ ë¬´ë‹¨ ìœ ì¶œì„ ë°©ì§€í•©ë‹ˆë‹¤.",
                questions: [
                    "ë°ì´í„°ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë¶„ë¥˜í•˜ê³  ì ‘ê·¼ê¶Œí•œì„ ì„¤ì •í•˜ê³  ìˆìŠµë‹ˆê¹Œ?",
                    "ì¼ë¶€ ì¤‘ìš” ë°ì´í„°ì— ëŒ€í•´ ìë™ ë¶„ë¥˜ ë° ì ‘ê·¼ ì œì–´ê°€ ê°€ëŠ¥í•©ë‹ˆê¹Œ?",
                    "ìµœì†Œê¶Œí•œ ì›ì¹™ìœ¼ë¡œ ë°ì´í„° ì ‘ê·¼ì„ ìë™ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆê¹Œ?",
                    "AIë¥¼ ì´ìš©í•˜ì—¬ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶„ë¥˜í•˜ê³  ì ‘ê·¼ ì œì–´í•©ë‹ˆê¹Œ?"
                ]
            }
        };

        const areaNames = Object.keys(assessmentAreas);

        // í˜ì´ì§€ í‘œì‹œ í•¨ìˆ˜
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        // ì§„ë‹¨ ì‹œì‘
        function startAssessment() {
            const companyName = document.getElementById('companyName').value;
            const email = document.getElementById('email').value;
            const companySize = document.getElementById('companySize').value;
            const businessType = document.getElementById('businessType').value;

            if (!companyName || !email || !companySize || !businessType) {
                showError('ëª¨ë“  ê¸°ì—… ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'companyErrorMessage');
                return;
            }

            companyInfo = {
                companyName,
                email,
                companySize,
                businessType
            };

            currentSection = 0;
            answers = {};
            showQuestionSection();
        }

        // ì§ˆë¬¸ ì„¹ì…˜ í‘œì‹œ
        function showQuestionSection() {
            const areaName = areaNames[currentSection];
            const areaData = assessmentAreas[areaName];

            document.getElementById('sectionTitle').innerHTML = `<span class="eco-icon">ğŸ”</span>${areaData.title}`;
            document.getElementById('sectionSubtitle').textContent = `${currentSection + 1} / ${areaNames.length} ì˜ì—­`;
            document.getElementById('sectionDescription').textContent = areaData.description;

            generateQuestions(areaName, areaData.questions);
            updateProgress();
            updateNavigationButtons();
            showPage('questionPage');
        }

        // ì§ˆë¬¸ ìƒì„±
        function generateQuestions(areaName, questions) {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            questions.forEach((question, index) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.innerHTML = `
                    <div class="question-text">
                        <strong>Q${index + 1}.</strong> ${question}
                    </div>
                    <div class="rating-container">
                        <div class="rating-option">
                            <input type="radio" id="q${currentSection}_${index}_1" name="question_${currentSection}_${index}" value="1">
                            <label for="q${currentSection}_${index}_1">1ì <br>ì „í˜€ ì—†ìŒ</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="q${currentSection}_${index}_2" name="question_${currentSection}_${index}" value="2">
                            <label for="q${currentSection}_${index}_2">2ì <br>ë¶€ë¶„ êµ¬í˜„</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="q${currentSection}_${index}_3" name="question_${currentSection}_${index}" value="3">
                            <label for="q${currentSection}_${index}_3">3ì <br>ëŒ€ë¶€ë¶„ êµ¬í˜„</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="q${currentSection}_${index}_4" name="question_${currentSection}_${index}" value="4">
                            <label for="q${currentSection}_${index}_4">4ì <br>ì™„ì „ êµ¬í˜„</label>
                        </div>
                    </div>
                `;
                container.appendChild(questionCard);
            });

            // ê¸°ì¡´ ë‹µë³€ ë³µì›
            if (answers[areaName]) {
                answers[areaName].forEach((score, index) => {
                    const radio = document.querySelector(`input[name="question_${currentSection}_${index}"][value="${score}"]`);
                    if (radio) radio.checked = true;
                });
            }
        }

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateProgress() {
            const totalSections = areaNames.length;
            const progress = ((currentSection + 1) / totalSections) * 100;
            
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `ì§„í–‰ë¥ : ${Math.round(progress)}%`;
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ì—…ë°ì´íŠ¸
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            if (currentSection === 0) {
                prevBtn.onclick = () => showPage('companyInfoPage');
                prevBtn.innerHTML = '<span class="eco-icon">â¬…ï¸</span>ê¸°ì—…ì •ë³´';
            } else {
                prevBtn.onclick = previousSection;
                prevBtn.innerHTML = '<span class="eco-icon">â¬…ï¸</span>ì´ì „';
            }

            if (currentSection === areaNames.length - 1) {
                nextBtn.onclick = completeAssessment;
                nextBtn.innerHTML = '<span class="eco-icon">âœ…</span>ì™„ë£Œ';
            } else {
                nextBtn.onclick = nextSection;
                nextBtn.innerHTML = '<span class="eco-icon">â–¶ï¸</span>ë‹¤ìŒ';
            }
        }

        // í˜„ì¬ ì„¹ì…˜ ë‹µë³€ ìˆ˜ì§‘
        function collectCurrentSectionAnswers() {
            const areaName = areaNames[currentSection];
            const questions = assessmentAreas[areaName].questions;
            const sectionAnswers = [];

            for (let i = 0; i < questions.length; i++) {
                const selectedOption = document.querySelector(`input[name="question_${currentSection}_${i}"]:checked`);
                if (!selectedOption) {
                    return null;
                }
                sectionAnswers.push(parseInt(selectedOption.value));
            }

            answers[areaName] = sectionAnswers;
            return sectionAnswers;
        }

        // ë‹¤ìŒ ì„¹ì…˜
        function nextSection() {
            const sectionAnswers = collectCurrentSectionAnswers();
            if (!sectionAnswers) {
                showError('ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”.', 'questionErrorMessage');
                return;
            }

            currentSection++;
            showQuestionSection();
        }

        // ì´ì „ ì„¹ì…˜
        function previousSection() {
            collectCurrentSectionAnswers();
            currentSection--;
            showQuestionSection();
        }

        // ì§„ë‹¨ ì™„ë£Œ
        function completeAssessment() {
            const sectionAnswers = collectCurrentSectionAnswers();
            if (!sectionAnswers) {
                showError('ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”.', 'questionErrorMessage');
                return;
            }

            const scores = calculateScores();
            displayResults(scores);
            submitToServer(scores);
            showPage('resultsPage');
        }

        // ì ìˆ˜ ê³„ì‚°
        function calculateScores() {
            const scores = {};
            let totalScore = 0;
            let questionCount = 0;

            Object.entries(answers).forEach(([area, areaAnswers]) => {
                const areaScore = areaAnswers.reduce((sum, score) => sum + score, 0) / areaAnswers.length;
                scores[area] = Math.round(areaScore * 10) / 10;
                totalScore += areaScore;
                questionCount++;
            });

            const overallScore = Math.round((totalScore / questionCount) * 10) / 10;
            const maturityLevel = determineMaturityLevel(overallScore);

            return {
                overall: overallScore,
                maturityLevel: maturityLevel,
                areas: scores
            };
        }

        // ì„±ìˆ™ë„ ë ˆë²¨ ê²°ì •
        function determineMaturityLevel(score) {
            if (score <= 1.5) return { level: 1, name: "ê¸°ì¡´(Traditional)" };
            if (score <= 2.5) return { level: 2, name: "ì´ˆê¸°(Initial)" };
            if (score <= 3.5) return { level: 3, name: "í–¥ìƒ(Advanced)" };
            return { level: 4, name: "ìµœì í™”(Optimal)" };
        }

        // ê²°ê³¼ í‘œì‹œ
        function displayResults(scores) {
            document.getElementById('overallScore').textContent = scores.overall.toFixed(1);
            document.getElementById('maturityLevel').textContent = `Level ${scores.maturityLevel.level} - ${scores.maturityLevel.name}`;

            // ì˜ì—­ë³„ ì ìˆ˜ í‘œì‹œ
            const areaScoresContainer = document.getElementById('areaScores');
            areaScoresContainer.innerHTML = '';

            Object.entries(scores.areas).forEach(([area, score]) => {
                const areaCard = document.createElement('div');
                areaCard.className = 'area-score-card';
                areaCard.innerHTML = `
                    <h3>${area}</h3>
                    <div class="area-score-value">${score.toFixed(1)}</div>
                `;
                areaScoresContainer.appendChild(areaCard);
            });

            // ë ˆì´ë” ì°¨íŠ¸ ìƒì„±
            createRadarChart(scores.areas);
        }

        // ë ˆì´ë” ì°¨íŠ¸ ìƒì„±
        function createRadarChart(areaScores) {
            const areas = Object.keys(areaScores);
            const scores = Object.values(areaScores);

            const data = [{
                type: 'scatterpolar',
                r: scores,
                theta: areas,
                fill: 'toself',
                fillcolor: 'rgba(76, 175, 80, 0.3)',
                line: {
                    color: '#4caf50',
                    width: 3
                },
                marker: {
                    color: '#4caf50',
                    size: 10
                },
                name: 'í˜„ì¬ ì ìˆ˜'
            }];

            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 4],
                        tickfont: { size: 12, color: '#2e7d32' },
                        gridcolor: '#c8e6c9'
                    },
                    angularaxis: {
                        tickfont: { size: 14, color: '#2e7d32' }
                    }
                },
                showlegend: false,
                title: {
                    text: 'ì˜ì—­ë³„ ë³´ì•ˆ ì„±ìˆ™ë„',
                    font: { size: 18, color: '#2e7d32' }
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('radarChart', data, layout, {responsive: true});
        }

        // ë©”ì¸ í˜ì´ì§€ ì°¨íŠ¸ ìƒì„± í•¨ìˆ˜ë“¤
        function createESGPieChart() {
            const data = [{
                values: [66.7, 33.3],
                labels: ['ESG ë„ì…', 'ESG ë¯¸ë„ì…'],
                type: 'pie',
                marker: {
                    colors: ['#4caf50', '#e8f5e8']
                },
                textinfo: 'label+percent',
                textposition: 'outside',
                hoverinfo: 'label+percent'
            }];

            const layout = {
                title: {
                    text: 'ì¼ë°˜ ì¤‘ê²¬ê¸°ì—…',
                    font: { size: 14 }
                },
                showlegend: false,
                margin: { t: 40, b: 20, l: 20, r: 20 },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('esgPieChart', data, layout, {responsive: true});
        }

        function createIndustryBarChart() {
            const data = [{
                x: ['ì œì¡°ì—…', 'ê¸ˆìœµì—…', 'IT/SW', 'ì„œë¹„ìŠ¤', 'ì „í†µì—…'],
                y: [71.6, 78.2, 65.3, 47.6, 42.1],
                type: 'bar',
                marker: {
                    color: ['#2e7d32', '#388e3c', '#43a047', '#4caf50', '#66bb6a']
                }
            }];

            const layout = {
                yaxis: { 
                    title: 'ë„ì…ë¥ (%)',
                    range: [0, 100]
                },
                margin: { t: 20, b: 40, l: 40, r: 20 },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('industryBarChart', data, layout, {responsive: true});
        }

        function createTrendLineChart() {
            const data = [{
                x: ['2021', '2022', '2023', '2024'],
                y: [38.5, 48.6, 56.1, 66.7],
                type: 'scatter',
                mode: 'lines+markers',
                line: { color: '#4caf50', width: 3 },
                marker: { size: 10, color: '#2e7d32' }
            }];

            const layout = {
                yaxis: { 
                    title: 'ESG ë„ì…ë¥ (%)',
                    range: [30, 70]
                },
                margin: { t: 20, b: 40, l: 40, r: 20 },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('trendLineChart', data, layout, {responsive: true});
        }

        // ì„œë²„ì— ë°ì´í„° ì „ì†¡
        function submitToServer(scores) {
            document.getElementById('loadingMessage').style.display = 'block';

            const formData = {
                companyName: companyInfo.companyName,
                email: companyInfo.email,
                companySize: companyInfo.companySize,
                businessType: companyInfo.businessType,
                overallScore: scores.overall,
                maturityLevel: scores.maturityLevel.level,
                identityScore: scores.areas['ì‹ ì›'] || 0,
                deviceScore: scores.areas['ê¸°ê¸° ë° ì—”ë“œí¬ì¸íŠ¸'] || 0,
                networkScore: scores.areas['ë„¤íŠ¸ì›Œí¬'] || 0,
                systemScore: scores.areas['ì‹œìŠ¤í…œ'] || 0,
                applicationScore: scores.areas['ì• í”Œë¦¬ì¼€ì´ì…˜'] || 0,
                dataScore: scores.areas['ë°ì´í„°'] || 0,
                allAnswers: answers
            };

            fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('loadingMessage').style.display = 'none';
                
                if (data.success) {
                    showSuccess('ğŸ‰ ì§„ë‹¨ ê²°ê³¼ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } else {
                    showError('âŒ ë°ì´í„° ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + data.message);
                }
            })
            .catch(error => {
                document.getElementById('loadingMessage').style.display = 'none';
                console.error('Error:', error);
                showError('ğŸŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
        }

        // ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°
        function restartAssessment() {
            currentSection = 0;
            answers = {};
            companyInfo = {};
            
            document.getElementById('companyForm').reset();
            
            showPage('companyInfoPage');
        }

        // ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
        function showError(message, elementId = 'errorMessage') {
            const errorDiv = document.getElementById(elementId);
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 5000);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            createESGPieChart();
            createIndustryBarChart();
            createTrendLineChart();
        });
    </script>
</body>
</html>
