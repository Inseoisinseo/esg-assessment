<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESG Î≥¥Ïïà ÏÑ±ÏàôÎèÑ ÏßÑÎã® ÏãúÏä§ÌÖú</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå±</text></svg>">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Malgun Gothic', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2d5016;
            background: linear-gradient(135deg, #a8e6cf 0%, #88c999 50%, #4caf50 100%);
            min-height: 100vh;
            position: relative;
        }

        /* ÌôòÍ≤Ω ÏπúÌôîÏ†Å Î∞∞Í≤Ω Ìå®ÌÑ¥ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(76, 175, 80, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 195, 74, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(102, 187, 106, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, #ffffff 0%, #f1f8e9 100%);
            padding: 30px 20px;
            text-align: center;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 
                0 20px 40px rgba(76, 175, 80, 0.15),
                0 8px 16px rgba(76, 175, 80, 0.1);
            border: 2px solid rgba(76, 175, 80, 0.1);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: 'üå±';
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 2em;
            opacity: 0.3;
        }

        /* Ïô∏ÍµêÎ∂Ä Î°úÍ≥† Ïä§ÌÉÄÏùº */
        .mofa-logo {
            text-align: center;
            margin-bottom: 20px;
        }

        .mofa-symbol {
            width: 60px;
            height: 60px;
            position: relative;
        }

        .mofa-symbol svg {
            width: 100%;
            height: 100%;
        }

        .mofa-text {
            text-align: left;
        }

        .mofa-text-ko {
            font-size: 1.4em;
            font-weight: bold;
            color: #1a3a52;
            margin: 0;
            line-height: 1.2;
        }

        .mofa-text-en {
            font-size: 0.9em;
            color: #666;
            margin: 0;
            line-height: 1.2;
        }

        .header h1 {
            color: #2e7d32;
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 700;
            background: linear-gradient(135deg, #2e7d32, #4caf50);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #558b2f;
            font-size: 1.1em;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 0.9em;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        /* ÏãúÍ∞ÅÌôî ÏÑπÏÖò */
        .visualization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .viz-card {
            background: linear-gradient(135deg, #ffffff 0%, #f9fbe7 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.1);
            border: 2px solid rgba(139, 195, 74, 0.1);
        }

        .viz-card h3 {
            color: #2e7d32;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
        }

        .chart-small {
            height: 250px;
        }

        /* ÌÜµÍ≥Ñ Ïπ¥Îìú Í∞ÑÏÜåÌôî */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card-mini {
            background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
            padding: 20px 15px;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid #4caf50;
            transition: transform 0.3s ease;
        }

        .stat-card-mini:hover {
            transform: translateY(-3px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #558b2f;
            font-size: 0.9em;
            font-weight: 600;
        }

        /* Ï†úÎ°úÌä∏Îü¨Ïä§Ìä∏ Ïù∏Ìè¨Í∑∏ÎûòÌîΩ */
        .infographic-section {
            background: linear-gradient(135deg, #ffffff 0%, #f1f8e9 100%);
            padding: 30px 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 15px 30px rgba(76, 175, 80, 0.1);
        }

        .infographic-title {
            text-align: center;
            color: #2e7d32;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .zt-principles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .zt-item {
            text-align: center;
            padding: 15px 10px;
            background: linear-gradient(135deg, #f1f8e9, #ffffff);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .zt-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.15);
        }

        .zt-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: block;
        }

        .zt-label {
            color: #2e7d32;
            font-weight: 600;
            font-size: 0.95em;
        }

        /* Ìèº Ïä§ÌÉÄÏùº Í∞úÏÑ† */
        .form-container {
            background: linear-gradient(135deg, #ffffff 0%, #f9fbe7 100%);
            padding: 30px 20px;
            border-radius: 20px;
            box-shadow: 
                0 25px 50px rgba(76, 175, 80, 0.15),
                0 10px 20px rgba(76, 175, 80, 0.1);
            margin-bottom: 30px;
            border: 2px solid rgba(139, 195, 74, 0.1);
        }

        .section-header {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .section-header h2 {
            font-size: 1.6em;
            margin-bottom: 8px;
        }

        .section-description {
            background: #f1f8e9;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #4caf50;
            font-size: 0.95em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2e7d32;
            font-size: 1em;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #c8e6c9;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #4caf50;
            box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.1);
            background: #ffffff;
        }

        /* ÏßàÎ¨∏ Ïπ¥Îìú Î™®Î∞îÏùº ÏµúÏ†ÅÌôî */
        .question-card {
            background: linear-gradient(135deg, #f1f8e9 0%, #ffffff 100%);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            border-left: 6px solid #4caf50;
            transition: all 0.3s ease;
        }

        .question-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.15);
        }

        .question-text {
            font-size: 1.05em;
            font-weight: 600;
            color: #2e7d32;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* ÌèâÍ∞Ä ÏòµÏÖò Î™®Î∞îÏùº ÏµúÏ†ÅÌôî */
        .rating-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .rating-option {
            position: relative;
        }

        .rating-option input[type="radio"] {
            display: none;
        }

        .rating-option label {
            display: block;
            padding: 12px 8px;
            background: linear-gradient(135deg, #ffffff, #f8f8f8);
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            font-weight: 500;
        }

        .rating-option input[type="radio"]:checked + label {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            border-color: #2e7d32;
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.3);
        }

        .rating-option label:hover {
            border-color: #4caf50;
            background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
        }

        .progress-container {
            background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
            height: 10px;
            border-radius: 8px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(76, 175, 80, 0.1);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #66bb6a, #8bc34a);
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 8px;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
            color: #2e7d32;
            font-size: 1em;
        }

        .btn {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            min-width: 150px;
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.4);
            background: linear-gradient(135deg, #2e7d32, #4caf50);
        }

        .btn:disabled {
            background: linear-gradient(135deg, #a5d6a7, #c8e6c9);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #868e96);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #5a6268, #6c757d);
        }

        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* Í≤∞Í≥º ÌéòÏù¥ÏßÄ */
        .results-container {
            display: none;
            background: linear-gradient(135deg, #ffffff 0%, #f1f8e9 100%);
            padding: 30px 20px;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(76, 175, 80, 0.15);
            margin-top: 30px;
            border: 2px solid rgba(139, 195, 74, 0.1);
        }

        .score-display {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #4caf50 0%, #66bb6a 50%, #8bc34a 100%);
            color: white;
            border-radius: 16px;
            margin-bottom: 25px;
        }

        .score-number {
            font-size: 3.5em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .score-label {
            font-size: 1.3em;
            opacity: 0.95;
            font-weight: 500;
        }

        .area-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .area-score-card {
            background: linear-gradient(135deg, #f1f8e9 0%, #ffffff 100%);
            padding: 20px 15px;
            border-radius: 12px;
            text-align: center;
            border-left: 5px solid #4caf50;
            transition: all 0.3s ease;
        }

        .area-score-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.15);
        }

        .area-score-card h3 {
            color: #2e7d32;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-weight: 600;
        }

        .area-score-value {
            font-size: 2em;
            font-weight: bold;
            color: #4caf50;
        }

        .hidden {
            display: none;
        }

        .loading {
            text-align: center;
            padding: 30px;
        }

        .spinner {
            border: 4px solid #e8f5e8;
            border-top: 4px solid #4caf50;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: linear-gradient(135deg, #f44336, #e57373);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }

        .success-message {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }

        .eco-icon {
            display: inline-block;
            margin-right: 5px;
            font-size: 1.1em;
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .header p {
                font-size: 1em;
            }
            
            .badge {
                font-size: 0.85em;
                padding: 8px 15px;
            }
            
            .mofa-symbol {
                width: 50px;
                height: 50px;
            }
            
            .mofa-text-ko {
                font-size: 1.2em;
            }
            
            .mofa-text-en {
                font-size: 0.8em;
            }
            
            .visualization-grid {
                grid-template-columns: 1fr;
            }
            
            .zt-principles {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .zt-icon {
                font-size: 2em;
            }
            
            .zt-label {
                font-size: 0.85em;
            }
            
            .rating-container {
                grid-template-columns: 1fr 1fr;
            }
            
            .rating-option label {
                padding: 10px 5px;
                font-size: 0.85em;
            }
            
            .navigation-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 200px;
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .question-text {
                font-size: 1em;
            }
            
            .section-description {
                font-size: 0.9em;
                padding: 12px;
            }
        }

        @media (max-width: 480px) {
            .stats-row {
                grid-template-columns: 1fr 1fr;
            }
            
            .stat-number {
                font-size: 1.6em;
            }
            
            .stat-label {
                font-size: 0.8em;
            }
            
            .zt-principles {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .area-scores {
                grid-template-columns: 1fr 1fr;
            }
            
            .area-score-card {
                padding: 15px 10px;
            }
            
            .area-score-card h3 {
                font-size: 0.95em;
            }
            
            .area-score-value {
                font-size: 1.6em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Î©îÏù∏ ÌéòÏù¥ÏßÄ -->
        <div class="page active" id="mainPage">
            <div class="header">
                <!-- Ïô∏ÍµêÎ∂Ä Î°úÍ≥† Ï∂îÍ∞Ä -->
                <div class="mofa-logo">
                     <p class="mofa-text-ko">Ïô∏ÍµêÎ∂Ä</p>
                     <p class="mofa-text-en">Ministry of Foreign Affairs</p>
                </div>
                <h1><span class="eco-icon">üå±</span>ESG Î≥¥Ïïà ÏÑ±ÏàôÎèÑ ÏßÑÎã®</h1>
                <p><span class="eco-icon">üîê</span>Ï†úÎ°úÌä∏Îü¨Ïä§Ìä∏ Í∏∞Î∞ò Í∏∞ÏóÖ Î≥¥Ïïà ÌèâÍ∞Ä</p>
                <div class="badge">
                    <span class="eco-icon">üåç</span>ESG ÌòëÎ†• ÎÑ§Ìä∏ÏõåÌÅ¨ ÌîåÎû´Ìèº
                </div>
            </div>

            <!-- ÌïµÏã¨ ÌÜµÍ≥Ñ Ïπ¥Îìú -->
            <div class="stats-row">
                <div class="stat-card-mini">
                    <div class="stat-number">43.9%</div>
                    <div class="stat-label">ESG ÎØ∏ÎèÑÏûÖ</div>
                </div>
                <div class="stat-card-mini">
                    <div class="stat-number">36.1%</div>
                    <div class="stat-label">ÏòàÏÇ∞ Î∂ÄÏ°±</div>
                </div>
                <div class="stat-card-mini">
                    <div class="stat-number">8.3%</div>
                    <div class="stat-label">Ï†ÑÎã¥ Ïù∏Î†•</div>
                </div>
                <div class="stat-card-mini">
                    <div class="stat-number">488Îßå$</div>
                    <div class="stat-label">Ïú†Ï∂ú ÎπÑÏö©</div>
                </div>
            </div>

            <!-- ÏãúÍ∞ÅÌôî Ï∞®Ìä∏ Í∑∏Î¶¨Îìú -->
            <div class="visualization-grid">
                <div class="viz-card">
                    <h3>üè¢ ESG Í≤ΩÏòÅ ÎèÑÏûÖ ÌòÑÌô©</h3>
                    <div id="esgPieChart" class="chart-small"></div>
                </div>
                <div class="viz-card">
                    <h3>üìä ÏóÖÏ¢ÖÎ≥Ñ ESG ÎèÑÏûÖÎ•†</h3>
                    <div id="industryBarChart" class="chart-small"></div>
                </div>
                <div class="viz-card">
                    <h3>üìà Ïó∞ÎèÑÎ≥Ñ ESG ÏÑ±Ïû• Ï∂îÏù¥</h3>
                    <div id="trendLineChart" class="chart-small"></div>
                </div>
            </div>

            <!-- Ï†úÎ°úÌä∏Îü¨Ïä§Ìä∏ Ïù∏Ìè¨Í∑∏ÎûòÌîΩ -->
            <div class="infographic-section">
                <h2 class="infographic-title">üõ°Ô∏è Ï†úÎ°úÌä∏Îü¨Ïä§Ìä∏ 6ÎåÄ ÌïµÏã¨ ÏòÅÏó≠</h2>
                <div class="zt-principles">
                    <div class="zt-item">
                        <span class="zt-icon">üë§</span>
                        <div class="zt-label">Ïã†Ïõê</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">üì±</span>
                        <div class="zt-label">Í∏∞Í∏∞</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">üåê</span>
                        <div class="zt-label">ÎÑ§Ìä∏ÏõåÌÅ¨</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">üíª</span>
                        <div class="zt-label">ÏãúÏä§ÌÖú</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">üìã</span>
                        <div class="zt-label">Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò</div>
                    </div>
                    <div class="zt-item">
                        <span class="zt-icon">üîí</span>
                        <div class="zt-label">Îç∞Ïù¥ÌÑ∞</div>
                    </div>
                </div>
            </div>

            <div class="navigation-buttons">
                <button class="btn" onclick="showPage('companyInfoPage')">
                    <span class="eco-icon">üöÄ</span>ÏßÑÎã® ÏãúÏûë
                </button>
            </div>
        </div>

        <!-- Í∏∞ÏóÖ Ï†ïÎ≥¥ ÏûÖÎ†• ÌéòÏù¥ÏßÄ -->
        <div class="page" id="companyInfoPage">
            <div class="header">
                <!-- Ïô∏ÍµêÎ∂Ä Î°úÍ≥† Ï∂îÍ∞Ä -->
                <div class="mofa-logo">
                     <p class="mofa-text-ko">Ïô∏ÍµêÎ∂Ä</p>
                     <p class="mofa-text-en">Ministry of Foreign Affairs</p>
                </div>
                <h1><span class="eco-icon">üè¢</span>Í∏∞ÏóÖ Ï†ïÎ≥¥ ÏûÖÎ†•</h1>
                <p>Ï†ïÌôïÌïú ÏßÑÎã®ÏùÑ ÏúÑÌïú Í∏∞Î≥∏ Ï†ïÎ≥¥</p>
            </div>

            <div class="form-container">
                <form id="companyForm">
                    <div class="form-group">
                        <label for="companyName"><span class="eco-icon">üè∑Ô∏è</span>Í∏∞ÏóÖÎ™Ö *</label>
                        <input type="text" id="companyName" name="companyName" required placeholder="Í∏∞ÏóÖÎ™Ö ÏûÖÎ†•">
                    </div>
                    
                    <div class="form-group">
                        <label for="email"><span class="eco-icon">üìß</span>Ïù¥Î©îÏùº *</label>
                        <input type="email" id="email" name="email" required placeholder="email@company.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="companySize"><span class="eco-icon">üë•</span>Í∏∞ÏóÖ Í∑úÎ™® *</label>
                        <select id="companySize" name="companySize" required>
                            <option value="">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                            <option value="1">ÏÜåÍ∏∞ÏóÖ (50Î™Ö ÎØ∏Îßå)</option>
                            <option value="2">Ï§ëÏÜåÍ∏∞ÏóÖ (50-299Î™Ö)</option>
                            <option value="3">Ï§ëÍ≤¨Í∏∞ÏóÖ (300-999Î™Ö)</option>
                            <option value="4">ÎåÄÍ∏∞ÏóÖ (1000Î™Ö Ïù¥ÏÉÅ)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="businessType"><span class="eco-icon">üè≠</span>ÏóÖÏ¢Ö *</label>
                        <select id="businessType" name="businessType" required>
                            <option value="">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                            <option value="1">Í≥†ÏúÑÌóòÍµ∞ (Í∏àÏúµ/ÏùòÎ£å/ÏóêÎÑàÏßÄ)</option>
                            <option value="2">Ï§ëÏúÑÌóòÍµ∞ (IT/Ï†ÑÏûêÌÜµÏã†)</option>
                            <option value="3">Ï†úÏ°∞ÏóÖÍµ∞ (ÏûêÎèôÏ∞®/Í∏∞Í≥Ñ)</option>
                            <option value="4">ÏÑúÎπÑÏä§Íµ∞ (Ïú†ÌÜµ/Î¨ºÎ•ò)</option>
                            <option value="5">Ï†ÑÌÜµÏóÖÍµ∞ (Í±¥ÏÑ§/ÎÜçÏóÖ)</option>
                        </select>
                    </div>
                </form>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="showPage('mainPage')">
                        <span class="eco-icon">‚¨ÖÔ∏è</span>Ïù¥Ï†Ñ
                    </button>
                    <button class="btn" onclick="startAssessment()">
                        <span class="eco-icon">‚ñ∂Ô∏è</span>ÏßÑÎã® ÏãúÏûë
                    </button>
                </div>
            </div>

            <div class="error-message" id="companyErrorMessage"></div>
        </div>

        <!-- ÏßàÎ¨∏ ÌéòÏù¥ÏßÄÎì§ -->
        <div class="page" id="questionPage">
            <div class="section-header">
                <h2 id="sectionTitle">ÏòÅÏó≠ ÏßÑÎã®</h2>
                <p id="sectionSubtitle">ÌòÑÏû¨ ÏòÅÏó≠</p>
            </div>

            <div class="section-description" id="sectionDescription">
                <!-- ÏòÅÏó≠Î≥Ñ ÏÑ§Î™ÖÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
            </div>

            <div class="form-container">
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="progress-text" id="progressText">ÏßÑÌñâÎ•†: 0%</div>

                <div id="questionsContainer">
                    <!-- ÏßàÎ¨∏Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="previousSection()" id="prevBtn">
                        <span class="eco-icon">‚¨ÖÔ∏è</span>Ïù¥Ï†Ñ
                    </button>
                    <button class="btn" onclick="nextSection()" id="nextBtn">
                        <span class="eco-icon">‚ñ∂Ô∏è</span>Îã§Ïùå
                    </button>
                </div>
            </div>

            <div class="error-message" id="questionErrorMessage"></div>
        </div>

        <!-- Í≤∞Í≥º ÌéòÏù¥ÏßÄ -->
        <div class="page" id="resultsPage">
            <div class="header">
                <!-- Ïô∏ÍµêÎ∂Ä Î°úÍ≥† Ï∂îÍ∞Ä -->
                <div class="mofa-logo">
                     <p class="mofa-text-ko">Ïô∏ÍµêÎ∂Ä</p>
                     <p class="mofa-text-en">Ministry of Foreign Affairs</p>
                </div>
                <h1><span class="eco-icon">üìä</span>ÏßÑÎã® Í≤∞Í≥º</h1>
                <p>ESG Î≥¥Ïïà ÏÑ±ÏàôÎèÑ ÏßÑÎã® Í≤∞Í≥º</p>
            </div>

            <div class="results-container" style="display: block;">
                <div class="score-display" id="scoreDisplay">
                    <div class="score-number" id="overallScore">0.0</div>
                    <div class="score-label" id="maturityLevel">Level 1 - Í∏∞Ï°¥</div>
                </div>
                
                <div class="chart-container">
                    <div id="radarChart"></div>
                </div>
                
                <div class="area-scores" id="areaScores"></div>

                <div class="navigation-buttons">
                    <button class="btn" onclick="showPage('mainPage')">
                        <span class="eco-icon">üè†</span>Ï≤òÏùåÏúºÎ°ú
                    </button>
                    <button class="btn" onclick="restartAssessment()">
                        <span class="eco-icon">üîÑ</span>Îã§Ïãú ÏßÑÎã®
                    </button>
                </div>
            </div>

            <div class="loading" id="loadingMessage" style="display: none;">
                <div class="spinner"></div>
                <p><span class="eco-icon">‚ö°</span>Í≤∞Í≥º Î∂ÑÏÑù Ï§ë...</p>
            </div>
        </div>

        <div class="success-message" id="successMessage"></div>
        <div class="error-message" id="errorMessage"></div>
    </div>

    <script>
        // ‚úÖ ÌÖåÏä§Ìä∏Ïö© Î°úÏª¨ URL (Í∞úÎ∞ú Ï§ëÏóêÎäî Ïù¥Í≤ÉÏùÑ ÏÇ¨Ïö©)
        // const API_URL = 'http://localhost:8888/.netlify/functions/submit-esg';
        
        // ‚úÖ ÌîÑÎ°úÎçïÏÖò URL (Î∞∞Ìè¨ ÌõÑÏóêÎäî Ïù¥Í≤ÉÏùÑ ÏÇ¨Ïö©)
        const API_URL = '/.netlify/functions/submit-esg';
        
        // ÌòÑÏû¨ ÏÉÅÌÉú Í¥ÄÎ¶¨
        let currentSection = 0;
        let answers = {};
        let companyInfo = {};

        // ÏòÅÏó≠Î≥Ñ Ï†ïÎ≥¥ Î∞è ÏßàÎ¨∏ Îç∞Ïù¥ÌÑ∞
        const assessmentAreas = {
            "Ïã†Ïõê": {
                title: "Ïã†Ïõê (Identity)",
                description: "ÏÇ¨Ïö©ÏûêÏôÄ Í∏∞Í∏∞Î•º Í≥†Ïú†ÌïòÍ≤å ÏãùÎ≥ÑÌïòÍ≥† Ïù∏Ï¶ùÌïòÎäî Ï≤¥Í≥ÑÏûÖÎãàÎã§. Ï†ÅÏ†àÌïú Ïù∏Ï¶ù Î∞©Î≤ïÏúºÎ°ú Ïã†ÏõêÏùÑ Í≤ÄÏ¶ùÌïòÍ≥† Î¶¨Ïä§ÌÅ¨ Í∏∞Î∞ò Ï†ëÍ∑º Ï†úÏñ¥Î•º ÏàòÌñâÌï©ÎãàÎã§.",
                questions: [
                    "Ïò®ÌîÑÎ†àÎØ∏Ïä§ÏôÄ ÌÅ¥ÎùºÏö∞Îìú ÏÑúÎπÑÏä§Ïùò ID Í¥ÄÎ¶¨Î•º ÌÜµÌï©ÌïòÏó¨ ÏÇ¨Ïö©Ìï©ÎãàÍπå?",
                    "Îã§Îã®Í≥Ñ Ïù∏Ï¶ù(MFA)Î•º ÏÇ¨Ïö©ÌïòÍ≥† ÏûàÏäµÎãàÍπå?", 
                    "ÌÅ¥ÎùºÏö∞Îìú Í∏∞Î∞ò Ïù∏Ï¶ù Î∞è ÏÉùÏ≤¥Ïù∏Ï¶ùÏùÑ ÏßÄÏõêÌï©ÎãàÍπå?",
                    "AI Í∏∞Î∞òÏúºÎ°ú ÏúÑÌóòÎèÑÎ•º ÏûêÎèô ÌåêÎã®ÌïòÏó¨ Î≥¥ÏïàÏ†ïÏ±ÖÏùÑ Ï†ÅÏö©Ìï©ÎãàÍπå?"
                ]
            },
            "Í∏∞Í∏∞ Î∞è ÏóîÎìúÌè¨Ïù∏Ìä∏": {
                title: "Í∏∞Í∏∞ Î∞è ÏóîÎìúÌè¨Ïù∏Ìä∏",
                description: "Í∏∞ÏóÖÎßùÏóê Ïó∞Í≤∞Îêú Î™®Îì† ÌïòÎìúÏõ®Ïñ¥ Í∏∞Í∏∞Ïùò Î≥¥ÏïàÏùÑ Í¥ÄÎ¶¨Ìï©ÎãàÎã§. Ïã†Î¢∞ÎèÑÍ∞Ä ÎÇÆÏùÄ Í∏∞Í∏∞Ïùò Ï†ëÍ∑ºÏùÑ Ï∞®Îã®ÌïòÍ≥† Î≥¥Ïïà Ï†ïÏ±ÖÏùÑ ÏûêÎèô Ï†ÅÏö©Ìï©ÎãàÎã§.",
                questions: [
                    "Î™®Îì† Í∏∞Í∏∞Ïùò Î≥¥ÏïàÏ†ïÏ±Ö Ï§ÄÏàò Ï†ïÎ≥¥Î•º ÏàòÏßëÌïòÍ≥† ÏûàÏäµÎãàÍπå?",
                    "ÎåÄÎ∂ÄÎ∂ÑÏùò Í∏∞Í∏∞Ïóê Î≥¥ÏïàÏ†ïÏ±ÖÏùÑ ÏûêÎèôÏúºÎ°ú Ï†ÅÏö©ÌïòÍ≥† ÏûàÏäµÎãàÍπå?",
                    "Î™®Îì† Í∏∞Í∏∞Ïóê ÎåÄÌï¥ ÏúÑÌòë ÌÉêÏßÄ Î∞è ÏûêÎèô ÎåÄÏùëÏù¥ Í∞ÄÎä•Ìï©ÎãàÍπå?",
                    "Í∏∞Í∏∞ Î≥¥ÏïàÏÉÅÌÉúÎ•º Ïã§ÏãúÍ∞ÑÏúºÎ°ú Î™®ÎãàÌÑ∞ÎßÅÌïòÍ≥† ÏûêÎèô Í¥ÄÎ¶¨Ìï©ÎãàÍπå?"
                ]
            },
            "ÎÑ§Ìä∏ÏõåÌÅ¨": {
                title: "ÎÑ§Ìä∏ÏõåÌÅ¨",
                description: "Îç∞Ïù¥ÌÑ∞ Ï†ÑÏÜ°Ïóê ÏÇ¨Ïö©ÎêòÎäî Î™®Îì† ÎÑ§Ìä∏ÏõåÌÅ¨Î•º ÏÑ∏Î∂ÑÌôîÌïòÏó¨ Í¥ÄÎ¶¨Ìï©ÎãàÎã§. ÎßàÏù¥ÌÅ¨Î°ú ÏÑ∏Í∑∏Î©òÌÖåÏù¥ÏÖòÏúºÎ°ú Î¨¥Îã® Ï†ëÍ∑ºÏùÑ Î∞©ÏßÄÌï©ÎãàÎã§.",
                questions: [
                    "Í≤ΩÍ≥ÑÎ≥¥Ïïà Ï§ëÏã¨Ïùò ÎÑ§Ìä∏ÏõåÌÅ¨ÏóêÏÑú Î™®Îì† Ìä∏ÎûòÌîΩÏùÑ Î™®ÎãàÌÑ∞ÎßÅÌï©ÎãàÍπå?",
                    "ÎÇ¥Î∂Ä Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÎì§ Í∞ÑÏùò Ìä∏ÎûòÌîΩÏùÑ ÏÑúÎ°ú Í≤©Î¶¨ÌïòÍ≥† ÏûàÏäµÎãàÍπå?",
                    "ÎßàÏù¥ÌÅ¨Î°ú ÏÑ∏Í∑∏Î©òÌÖåÏù¥ÏÖòÏúºÎ°ú Í∞Å Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÑ Î≥¥Ìò∏Ìï©ÎãàÍπå?",
                    "ÏûêÎèôÌôîÎêú ÎÑ§Ìä∏ÏõåÌÅ¨ Î≥¥Ïïà Ï†ïÏ±Ö Î∞∞Ìè¨ Î∞è Í¥ÄÎ¶¨Í∞Ä Í∞ÄÎä•Ìï©ÎãàÍπå?"
                ]
            },
            "ÏãúÏä§ÌÖú": {
                title: "ÏãúÏä§ÌÖú",
                description: "Ï§ëÏöî Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÍ≥º Îç∞Ïù¥ÌÑ∞Î•º Í¥ÄÎ¶¨ÌïòÎäî ÏÑúÎ≤Ñ ÏãúÏä§ÌÖúÏùò Î≥¥ÏïàÏûÖÎãàÎã§. ÏÑ∏Î∞ÄÌïú Ï†ëÍ∑º Ï†úÏñ¥ÏôÄ ÏûêÎèôÌôîÎêú Î≥¥Ïïà Í¥ÄÎ¶¨Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.",
                questions: [
                    "ÏãúÏä§ÌÖú Ï†ëÍ∑º Ïãú Îã®ÏàúÌïú ID/Ìå®Ïä§ÏõåÎìúÎßå ÏÇ¨Ïö©Ìï©ÎãàÍπå?",
                    "Í∞Å ÏãúÏä§ÌÖúÏùÑ ÎèÖÎ¶ΩÏ†ÅÏúºÎ°ú Í¥ÄÎ¶¨ÌïòÍ≥† ÏûàÏäµÎãàÍπå?",
                    "Ïò®ÌîÑÎ†àÎØ∏Ïä§ÏôÄ ÌÅ¥ÎùºÏö∞Îìú ÏãúÏä§ÌÖúÏóê Î≥¥Ïïà Ìå®ÏπòÎ•º ÏûêÎèô Ï†ÅÏö©Ìï©ÎãàÍπå?",
                    "Î™®Îì† ÏãúÏä§ÌÖúÏùÑ Ïã§ÏãúÍ∞Ñ Î™®ÎãàÌÑ∞ÎßÅÌïòÍ≥† ÏûêÎèô ÎåÄÏùëÏù¥ Í∞ÄÎä•Ìï©ÎãàÍπå?"
                ]
            },
            "Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò": {
                title: "Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Î∞è ÏõåÌÅ¨Î°úÎìú",
                description: "Í∏∞ÏóÖÏùò ÏÑúÎπÑÏä§ÏôÄ ÌîÑÎ°úÍ∑∏Îû®Ïùò Î≥¥ÏïàÏùÑ Í¥ÄÎ¶¨Ìï©ÎãàÎã§. ÏµúÏÜåÍ∂åÌïú ÏõêÏπôÍ≥º Ïã§ÏãúÍ∞Ñ ÏúÑÌóò Î∂ÑÏÑùÏùÑ ÌÜµÌï¥ ÏïàÏ†ÑÌïú Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò ÌôòÍ≤ΩÏùÑ Íµ¨Ï∂ïÌï©ÎãàÎã§.",
                questions: [
                    "Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Ï†ëÍ∑º Í∂åÌïúÏùÑ ÏàòÎèôÏúºÎ°ú ÏÑ§Ï†ïÌïòÍ≥† ÏûàÏäµÎãàÍπå?",
                    "Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Í∞úÎ∞ú Ïãú Í∏∞Î≥∏Ï†ÅÏù∏ Î≥¥Ïïà ÌÖåÏä§Ìä∏Î•º ÏàòÌñâÌï©ÎãàÍπå?",
                    "ÏµúÏÜåÍ∂åÌïú ÏõêÏπôÏúºÎ°ú Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Ï†ëÍ∑ºÏùÑ ÏûêÎèô Ï†úÏñ¥Ìï©ÎãàÍπå?",
                    "Ïã§ÏãúÍ∞Ñ ÏúÑÌóò Î∂ÑÏÑùÏúºÎ°ú Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Ï†ëÍ∑ºÏùÑ ÏûêÎèô Ï†úÏñ¥Ìï©ÎãàÍπå?"
                ]
            },
            "Îç∞Ïù¥ÌÑ∞": {
                title: "Îç∞Ïù¥ÌÑ∞",
                description: "Í∞ÄÏû• Ï§ëÏöîÌïú ÏûêÏÇ∞Ïù∏ Îç∞Ïù¥ÌÑ∞Î•º Î≥¥Ìò∏Ìï©ÎãàÎã§. Îç∞Ïù¥ÌÑ∞ Î∂ÑÎ•ò, ÏïîÌò∏Ìôî, Ï†ëÍ∑º Ï†úÏñ¥Î•º ÌÜµÌï¥ Î¨¥Îã® Ïú†Ï∂úÏùÑ Î∞©ÏßÄÌï©ÎãàÎã§.",
                questions: [
                    "Îç∞Ïù¥ÌÑ∞Î•º ÏàòÎèôÏúºÎ°ú Î∂ÑÎ•òÌïòÍ≥† Ï†ëÍ∑ºÍ∂åÌïúÏùÑ ÏÑ§Ï†ïÌïòÍ≥† ÏûàÏäµÎãàÍπå?",
                    "ÏùºÎ∂Ä Ï§ëÏöî Îç∞Ïù¥ÌÑ∞Ïóê ÎåÄÌï¥ ÏûêÎèô Î∂ÑÎ•ò Î∞è Ï†ëÍ∑º Ï†úÏñ¥Í∞Ä Í∞ÄÎä•Ìï©ÎãàÍπå?",
                    "ÏµúÏÜåÍ∂åÌïú ÏõêÏπôÏúºÎ°ú Îç∞Ïù¥ÌÑ∞ Ï†ëÍ∑ºÏùÑ ÏûêÎèô Í¥ÄÎ¶¨ÌïòÍ≥† ÏûàÏäµÎãàÍπå?",
                    "AIÎ•º Ïù¥Ïö©ÌïòÏó¨ Ïã§ÏãúÍ∞ÑÏúºÎ°ú Îç∞Ïù¥ÌÑ∞Î•º Î∂ÑÎ•òÌïòÍ≥† Ï†ëÍ∑º Ï†úÏñ¥Ìï©ÎãàÍπå?"
                ]
            }
        };

        const areaNames = Object.keys(assessmentAreas);

        // ÌéòÏù¥ÏßÄ ÌëúÏãú Ìï®Ïàò
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        // ÏßÑÎã® ÏãúÏûë
        function startAssessment() {
            const companyName = document.getElementById('companyName').value;
            const email = document.getElementById('email').value;
            const companySize = document.getElementById('companySize').value;
            const businessType = document.getElementById('businessType').value;

            if (!companyName || !email || !companySize || !businessType) {
                showError('Î™®Îì† Í∏∞ÏóÖ Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.', 'companyErrorMessage');
                return;
            }

            companyInfo = {
                companyName,
                email,
                companySize,
                businessType
            };

            currentSection = 0;
            answers = {};
            showQuestionSection();
        }

        // ÏßàÎ¨∏ ÏÑπÏÖò ÌëúÏãú
        function showQuestionSection() {
            const areaName = areaNames[currentSection];
            const areaData = assessmentAreas[areaName];

            document.getElementById('sectionTitle').innerHTML = `<span class="eco-icon">üîç</span>${areaData.title}`;
            document.getElementById('sectionSubtitle').textContent = `${currentSection + 1} / ${areaNames.length} ÏòÅÏó≠`;
            document.getElementById('sectionDescription').textContent = areaData.description;

            generateQuestions(areaName, areaData.questions);
            updateProgress();
            updateNavigationButtons();
            showPage('questionPage');
        }

        // ÏßàÎ¨∏ ÏÉùÏÑ±
        function generateQuestions(areaName, questions) {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            questions.forEach((question, index) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.innerHTML = `
                    <div class="question-text">
                        <strong>Q${index + 1}.</strong> ${question}
                    </div>
                    <div class="rating-container">
                        <div class="rating-option">
                            <input type="radio" id="q${currentSection}_${index}_1" name="question_${currentSection}_${index}" value="1">
                            <label for="q${currentSection}_${index}_1">1Ï†ê<br>Ï†ÑÌòÄ ÏóÜÏùå</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="q${currentSection}_${index}_2" name="question_${currentSection}_${index}" value="2">
                            <label for="q${currentSection}_${index}_2">2Ï†ê<br>Î∂ÄÎ∂Ñ Íµ¨ÌòÑ</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="q${currentSection}_${index}_3" name="question_${currentSection}_${index}" value="3">
                            <label for="q${currentSection}_${index}_3">3Ï†ê<br>ÎåÄÎ∂ÄÎ∂Ñ Íµ¨ÌòÑ</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="q${currentSection}_${index}_4" name="question_${currentSection}_${index}" value="4">
                            <label for="q${currentSection}_${index}_4">4Ï†ê<br>ÏôÑÏ†Ñ Íµ¨ÌòÑ</label>
                        </div>
                    </div>
                `;
                container.appendChild(questionCard);
            });

            // Í∏∞Ï°¥ ÎãµÎ≥Ä Î≥µÏõê
            if (answers[areaName]) {
                answers[areaName].forEach((score, index) => {
                    const radio = document.querySelector(`input[name="question_${currentSection}_${index}"][value="${score}"]`);
                    if (radio) radio.checked = true;
                });
            }
        }

        // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updateProgress() {
            const totalSections = areaNames.length;
            const progress = ((currentSection + 1) / totalSections) * 100;
            
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `ÏßÑÌñâÎ•†: ${Math.round(progress)}%`;
        }

        // ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î≤ÑÌäº ÏóÖÎç∞Ïù¥Ìä∏
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            if (currentSection === 0) {
                prevBtn.onclick = () => showPage('companyInfoPage');
                prevBtn.innerHTML = '<span class="eco-icon">‚¨ÖÔ∏è</span>Í∏∞ÏóÖÏ†ïÎ≥¥';
            } else {
                prevBtn.onclick = previousSection;
                prevBtn.innerHTML = '<span class="eco-icon">‚¨ÖÔ∏è</span>Ïù¥Ï†Ñ';
            }

            if (currentSection === areaNames.length - 1) {
                nextBtn.onclick = completeAssessment;
                nextBtn.innerHTML = '<span class="eco-icon">‚úÖ</span>ÏôÑÎ£å';
            } else {
                nextBtn.onclick = nextSection;
                nextBtn.innerHTML = '<span class="eco-icon">‚ñ∂Ô∏è</span>Îã§Ïùå';
            }
        }

        // ÌòÑÏû¨ ÏÑπÏÖò ÎãµÎ≥Ä ÏàòÏßë
        function collectCurrentSectionAnswers() {
            const areaName = areaNames[currentSection];
            const questions = assessmentAreas[areaName].questions;
            const sectionAnswers = [];

            for (let i = 0; i < questions.length; i++) {
                const selectedOption = document.querySelector(`input[name="question_${currentSection}_${i}"]:checked`);
                if (!selectedOption) {
                    return null;
                }
                sectionAnswers.push(parseInt(selectedOption.value));
            }

            answers[areaName] = sectionAnswers;
            return sectionAnswers;
        }

        // Îã§Ïùå ÏÑπÏÖò
        function nextSection() {
            const sectionAnswers = collectCurrentSectionAnswers();
            if (!sectionAnswers) {
                showError('Î™®Îì† ÏßàÎ¨∏Ïóê ÎãµÎ≥ÄÌï¥Ï£ºÏÑ∏Ïöî.', 'questionErrorMessage');
                return;
            }

            currentSection++;
            showQuestionSection();
        }

        // Ïù¥Ï†Ñ ÏÑπÏÖò
        function previousSection() {
            collectCurrentSectionAnswers();
            currentSection--;
            showQuestionSection();
        }

        // ÏßÑÎã® ÏôÑÎ£å
        function completeAssessment() {
            const sectionAnswers = collectCurrentSectionAnswers();
            if (!sectionAnswers) {
                showError('Î™®Îì† ÏßàÎ¨∏Ïóê ÎãµÎ≥ÄÌï¥Ï£ºÏÑ∏Ïöî.', 'questionErrorMessage');
                return;
            }

            const scores = calculateScores();
            displayResults(scores);
            submitToServer(scores);
            showPage('resultsPage');
        }

        // Ï†êÏàò Í≥ÑÏÇ∞
        function calculateScores() {
            const scores = {};
            let totalScore = 0;
            let questionCount = 0;

            Object.entries(answers).forEach(([area, areaAnswers]) => {
                const areaScore = areaAnswers.reduce((sum, score) => sum + score, 0) / areaAnswers.length;
                scores[area] = Math.round(areaScore * 10) / 10;
                totalScore += areaScore;
                questionCount++;
            });

            const overallScore = Math.round((totalScore / questionCount) * 10) / 10;
            const maturityLevel = determineMaturityLevel(overallScore);

            return {
                overall: overallScore,
                maturityLevel: maturityLevel,
                areas: scores
            };
        }

        // ÏÑ±ÏàôÎèÑ Î†àÎ≤® Í≤∞Ï†ï
        function determineMaturityLevel(score) {
            if (score <= 1.5) return { level: 1, name: "Í∏∞Ï°¥(Traditional)" };
            if (score <= 2.5) return { level: 2, name: "Ï¥àÍ∏∞(Initial)" };
            if (score <= 3.5) return { level: 3, name: "Ìñ•ÏÉÅ(Advanced)" };
            return { level: 4, name: "ÏµúÏ†ÅÌôî(Optimal)" };
        }

        // Í≤∞Í≥º ÌëúÏãú
        function displayResults(scores) {
            document.getElementById('overallScore').textContent = scores.overall.toFixed(1);
            document.getElementById('maturityLevel').textContent = `Level ${scores.maturityLevel.level} - ${scores.maturityLevel.name}`;

            // ÏòÅÏó≠Î≥Ñ Ï†êÏàò ÌëúÏãú
            const areaScoresContainer = document.getElementById('areaScores');
            areaScoresContainer.innerHTML = '';

            Object.entries(scores.areas).forEach(([area, score]) => {
                const areaCard = document.createElement('div');
                areaCard.className = 'area-score-card';
                areaCard.innerHTML = `
                    <h3>${area}</h3>
                    <div class="area-score-value">${score.toFixed(1)}</div>
                `;
                areaScoresContainer.appendChild(areaCard);
            });

            // Î†àÏù¥Îçî Ï∞®Ìä∏ ÏÉùÏÑ±
            createRadarChart(scores.areas);
        }

        // Î†àÏù¥Îçî Ï∞®Ìä∏ ÏÉùÏÑ±
        function createRadarChart(areaScores) {
            const areas = Object.keys(areaScores);
            const scores = Object.values(areaScores);

            const data = [{
                type: 'scatterpolar',
                r: scores,
                theta: areas,
                fill: 'toself',
                fillcolor: 'rgba(76, 175, 80, 0.3)',
                line: {
                    color: '#4caf50',
                    width: 3
                },
                marker: {
                    color: '#4caf50',
                    size: 10
                },
                name: 'ÌòÑÏû¨ Ï†êÏàò'
            }];

            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 4],
                        tickfont: { size: 12, color: '#2e7d32' },
                        gridcolor: '#c8e6c9'
                    },
                    angularaxis: {
                        tickfont: { size: 14, color: '#2e7d32' }
                    }
                },
                showlegend: false,
                title: {
                    text: 'ÏòÅÏó≠Î≥Ñ Î≥¥Ïïà ÏÑ±ÏàôÎèÑ',
                    font: { size: 18, color: '#2e7d32' }
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('radarChart', data, layout, {responsive: true});
        }

        // Î©îÏù∏ ÌéòÏù¥ÏßÄ Ï∞®Ìä∏ ÏÉùÏÑ± Ìï®ÏàòÎì§
        function createESGPieChart() {
            const data = [{
                values: [66.7, 33.3],
                labels: ['ESG ÎèÑÏûÖ', 'ESG ÎØ∏ÎèÑÏûÖ'],
                type: 'pie',
                marker: {
                    colors: ['#4caf50', '#e8f5e8']
                },
                textinfo: 'label+percent',
                textposition: 'outside',
                hoverinfo: 'label+percent'
            }];

            const layout = {
                title: {
                    text: 'ÏùºÎ∞ò Ï§ëÍ≤¨Í∏∞ÏóÖ',
                    font: { size: 14 }
                },
                showlegend: false,
                margin: { t: 40, b: 20, l: 20, r: 20 },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('esgPieChart', data, layout, {responsive: true});
        }

        function createIndustryBarChart() {
            const data = [{
                x: ['Ï†úÏ°∞ÏóÖ', 'Í∏àÏúµÏóÖ', 'IT/SW', 'ÏÑúÎπÑÏä§', 'Ï†ÑÌÜµÏóÖ'],
                y: [71.6, 78.2, 65.3, 47.6, 42.1],
                type: 'bar',
                marker: {
                    color: ['#2e7d32', '#388e3c', '#43a047', '#4caf50', '#66bb6a']
                }
            }];

            const layout = {
                yaxis: { 
                    title: 'ÎèÑÏûÖÎ•†(%)',
                    range: [0, 100]
                },
                margin: { t: 20, b: 40, l: 40, r: 20 },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('industryBarChart', data, layout, {responsive: true});
        }

        function createTrendLineChart() {
            const data = [{
                x: ['2021', '2022', '2023', '2024'],
                y: [38.5, 48.6, 56.1, 66.7],
                type: 'scatter',
                mode: 'lines+markers',
                line: { color: '#4caf50', width: 3 },
                marker: { size: 10, color: '#2e7d32' }
            }];

            const layout = {
                yaxis: { 
                    title: 'ESG ÎèÑÏûÖÎ•†(%)',
                    range: [30, 70]
                },
                margin: { t: 20, b: 40, l: 40, r: 20 },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('trendLineChart', data, layout, {responsive: true});
        }

        // ÏÑúÎ≤ÑÏóê Îç∞Ïù¥ÌÑ∞ Ï†ÑÏÜ°
        function submitToServer(scores) {
            document.getElementById('loadingMessage').style.display = 'block';

            const formData = {
                companyName: companyInfo.companyName,
                email: companyInfo.email,
                companySize: companyInfo.companySize,
                businessType: companyInfo.businessType,
                overallScore: scores.overall,
                maturityLevel: scores.maturityLevel.level,
                identityScore: scores.areas['Ïã†Ïõê'] || 0,
                deviceScore: scores.areas['Í∏∞Í∏∞ Î∞è ÏóîÎìúÌè¨Ïù∏Ìä∏'] || 0,
                networkScore: scores.areas['ÎÑ§Ìä∏ÏõåÌÅ¨'] || 0,
                systemScore: scores.areas['ÏãúÏä§ÌÖú'] || 0,
                applicationScore: scores.areas['Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò'] || 0,
                dataScore: scores.areas['Îç∞Ïù¥ÌÑ∞'] || 0,
                allAnswers: answers
            };

            fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('loadingMessage').style.display = 'none';
                
                if (data.success) {
                    showSuccess('üéâ ÏßÑÎã® Í≤∞Í≥ºÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!');
                } else {
                    showError('‚ùå Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ' + data.message);
                }
            })
            .catch(error => {
                document.getElementById('loadingMessage').style.display = 'none';
                console.error('Error:', error);
                showError('üåê ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            });
        }

        // Îã§Ïãú ÏßÑÎã®ÌïòÍ∏∞
        function restartAssessment() {
            currentSection = 0;
            answers = {};
            companyInfo = {};
            
            document.getElementById('companyForm').reset();
            
            showPage('companyInfoPage');
        }

        // Ïò§Î•ò Î©îÏãúÏßÄ ÌëúÏãú
        function showError(message, elementId = 'errorMessage') {
            const errorDiv = document.getElementById(elementId);
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        // ÏÑ±Í≥µ Î©îÏãúÏßÄ ÌëúÏãú
        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 5000);
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            createESGPieChart();
            createIndustryBarChart();
            createTrendLineChart();
        });
    </script>
</body>
</html>
